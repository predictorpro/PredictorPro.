<!DOCTYPE html>
<html lang="es-PE" class="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title id="docTitle">PredictorPro – Aviador</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>

  <style>
    /* ===== Фон страницы (паттерн), поверх — liquid glass (как Apple of Fortune) ===== */
    body.diamond-bg{ background: none !important; position: relative; }
    body.diamond-bg::before{
      content:""; position: fixed; inset:0; z-index:-1; pointer-events:none;
      background-color:#fff;
      background-image:
        linear-gradient(to bottom, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 40%, rgba(255,255,255,0.85) 50%, rgba(255,255,255,0) 65%),
        repeating-linear-gradient(45deg, rgba(22,163,74,.12) 0 12px, rgba(22,163,74,0) 12px 24px),
        repeating-linear-gradient(-45deg, rgba(22,163,74,.12) 0 12px, rgba(22,163,74,0) 12px 24px),
        linear-gradient(to bottom, #ecfdf5, #d1fae5);
      background-size:auto,40px 40px,40px 40px,auto;
      background-position: top left, center, center, center;
    }
    .dark body.diamond-bg::before{
      background-color:#000;
      background-image:
        linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 40%, rgba(0,0,0,0.85) 50%, rgba(0,0,0,0) 65%),
        repeating-linear-gradient(45deg, rgba(22,163,74,.2) 0 12px, rgba(22,163,74,0) 12px 24px),
        repeating-linear-gradient(-45deg, rgba(22,163,74,.2) 0 12px, rgba(22,163,74,0) 12px 24px),
        linear-gradient(to bottom, #052e16, #065f46);
      background-size:auto,40px 40px,40px 40px,auto;
      background-position: top left, center, center, center;
    }

    /* ======= Apple Liquid Glass — базовые утилиты ======= */
    .lgx-blur{ backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
    .lgx-sheen{ position:relative; overflow:hidden; }
    .lgx-sheen::before{
      content:""; position:absolute; left:-30%; top:-40%; width:160%; height:160%;
      background: radial-gradient(140px 180px at 25% 30%, rgba(255,255,255,.35), transparent 60%);
      filter: blur(12px); pointer-events: none; mix-blend-mode: screen;
    }
    @media (max-width: 640px){
      .lgx-sheen::before{
        left:-35%; top:-45%; width:170%; height:170%;
        background: radial-gradient(120px 150px at 28% 28%, rgba(255,255,255,.32), transparent 62%);
      }
    }
    .lgx-card{
      border-radius: 1rem;
      background: linear-gradient(135deg, rgba(255,255,255,.26), rgba(255,255,255,.08));
      border: 1px solid rgba(34,197,94,.45);
      box-shadow:
        0 10px 30px rgba(0,0,0,.22),
        inset 0 1px 0 rgba(255,255,255,.22),
        inset 0 -1px 0 rgba(255,255,255,.12);
    }
    .dark .lgx-card{
      background: linear-gradient(135deg, rgba(0,0,0,.38), rgba(0,0,0,.2));
      border-color: rgba(34,197,94,.55);
    }
    .lgx-chip{
      border-radius: 9999px;
      background: linear-gradient(135deg, rgba(255,255,255,.28), rgba(255,255,255,.08));
      border: 1px solid rgba(34,197,94,.5);
      box-shadow:
        0 8px 24px rgba(0,0,0,.22),
        inset 0 1px 0 rgba(255,255,255,.25),
        inset 0 -1px 0 rgba(255,255,255,.12);
    }
    .dark .lgx-chip{
      background: linear-gradient(135deg, rgba(0,0,0,.35), rgba(0,0,0,.18));
      border-color: rgba(34,197,94,.55);
    }

    .lgx-btn{
      border-radius: 1rem; font-weight: 600;
      background: linear-gradient(135deg, rgba(34,197,94,.28), rgba(34,197,94,.12));
      border: 1px solid rgba(34,197,94,.55);
      box-shadow:
        0 10px 28px rgba(0,0,0,.22),
        inset 0 1px 0 rgba(255,255,255,.25),
        inset 0 -1px 0 rgba(255,255,255,.12);
      transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
      touch-action: manipulation;
      transform: translate3d(0,0,0);
    }
    .lgx-btn:hover{ transform: translate3d(0,-1px,0); border-color: rgba(34,197,94,.7); }
    .lgx-btn:active{ transform: translate3d(0,0,0); }
    .lgx-btn.solid{ background: linear-gradient(135deg, rgba(16,185,129,.40), rgba(16,185,129,.18)); }

    .lgx-nav{
      background: linear-gradient(135deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
      border-bottom: 1px solid rgba(34,197,94,.4);
      box-shadow: 0 8px 22px rgba(0,0,0,.18);
    }
    .dark .lgx-nav{
      background: linear-gradient(135deg, rgba(0,0,0,.5), rgba(0,0,0,.28));
      border-color: rgba(34,197,94,.5);
    }

    /* ======= НОВЫЙ ДИЗАЙН КНОПОК ВЕРХНЕГО БАРА (как AOF) ======= */
    .nav-badge{
      border-radius: 9999px;
      padding: .45rem .65rem;
      background: linear-gradient(135deg, rgba(255,255,255,.22), rgba(255,255,255,.06));
      border: 1px solid rgba(34,197,94,.40);
      box-shadow:
        0 8px 22px rgba(0,0,0,.18),
        inset 0 1px 0 rgba(255,255,255,.22);
      transition: transform .18s ease;
      transform: translate3d(0,0,0);
    }
    .dark .nav-badge{
      background: linear-gradient(135deg, rgba(0,0,0,.45), rgba(0,0,0,.24));
      border-color: rgba(34,197,94,.5);
    }
    .nav-badge:hover{ transform: translate3d(0,-1px,0); }

    /* ===== ONLINE WAVES + GLASS INDICATOR + TOOLTIP (как AOF) ===== */
    .online-pill{
      border: 0 !important;
      padding: .30rem .55rem !important;
      gap: .45rem !important;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      background: linear-gradient(135deg, rgba(255,255,255,.30), rgba(255,255,255,.10)) !important;
      box-shadow:
        0 10px 26px rgba(0,0,0,.18),
        inset 0 1px 0 rgba(255,255,255,.22),
        inset 0 -1px 0 rgba(255,255,255,.10) !important;
      position: relative;
      overflow: hidden;
      height: 2.25rem;
      display: inline-flex;
      align-items: center;
      width: auto;
    }
    .online-pill::before{
      content:""; position:absolute; left:-35%; top:-55%; width:170%; height:170%;
      background: radial-gradient(140px 180px at 28% 28%, rgba(255,255,255,.30), transparent 62%);
      filter: blur(12px);
      pointer-events:none;
      mix-blend-mode: screen;
      opacity: .9;
    }
    .dark .online-pill{
      background: linear-gradient(135deg, rgba(0,0,0,.48), rgba(0,0,0,.28)) !important;
      box-shadow:
        0 10px 26px rgba(0,0,0,.22),
        inset 0 1px 0 rgba(255,255,255,.12),
        inset 0 -1px 0 rgba(255,255,255,.06) !important;
    }
    .dark .online-pill::before{ opacity: .55; }

    .online-dot{
      position: relative; width: .75rem; height: .75rem; border-radius: 9999px;
      background: radial-gradient(circle at 40% 40%, #22c55e, #16a34a);
      box-shadow: 0 0 10px rgba(34,197,94,.7);
      flex: 0 0 auto;
    }
    .online-dot::after{
      content:""; position:absolute; inset: -6px;
      border-radius: 9999px; border: 2px solid rgba(34,197,94,.45);
      animation: online-pulse 1.6s infinite ease-out;
    }
    @keyframes online-pulse{
      0%{ transform: scale(.6); opacity:.8; }
      70%{ transform: scale(1.25); opacity:0; }
      100%{ transform: scale(1.25); opacity:0; }
    }

    .online-signal{
      --cx: 50%;
      --cy: 50%;
      position: relative;
      width: 1.65rem;
      height: 1.65rem;
      display: inline-block;
      flex: 0 0 auto;
    }
    .online-signal .wave{
      position:absolute;
      left: var(--cx);
      top: var(--cy);
      width: .28rem;
      height: .28rem;
      border-radius: 9999px;
      border: 2px solid rgba(34,197,94,.40);
      transform: translate(-50%,-50%) scale(.25);
      opacity: 0;
      animation: wave-out 1.6s infinite ease-out;
      pointer-events: none;
    }
    .online-signal .wave2{ animation-delay: .53s; opacity:0; }
    .online-signal .wave3{ animation-delay: 1.06s; opacity:0; }
    @keyframes wave-out{
      0%{ transform: translate(-50%,-50%) scale(.35); opacity:.55; }
      70%{ transform: translate(-50%,-50%) scale(4.2); opacity:0; }
      100%{ transform: translate(-50%,-50%) scale(4.2); opacity:0; }
    }
    .online-signal .online-dot{
      position: absolute;
      left: var(--cx);
      top: var(--cy);
      transform: translate(-50%,-50%);
      width: .52rem;
      height: .52rem;
      box-shadow: 0 0 12px rgba(34,197,94,.72);
    }
    .online-signal .online-dot::after{
      inset: -7px;
      border-color: rgba(34,197,94,.42);
    }
    #activeUsersCount{ line-height: 1; display: inline-flex; align-items: center; }

    .online-tooltip{
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      padding: .35rem .55rem;
      border-radius: .75rem;
      background: linear-gradient(135deg, rgba(255,255,255,.26), rgba(255,255,255,.10));
      border: 1px solid rgba(34,197,94,.45);
      box-shadow: 0 10px 24px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 12px;
      font-weight: 600;
      color: #166534;
      white-space: nowrap;
      opacity: 0;
      transform: translateY(-2px);
      transition: opacity .18s ease, transform .18s ease;
      pointer-events: none;
      z-index: 60;
    }
    .dark .online-tooltip{
      background: linear-gradient(135deg, rgba(0,0,0,.45), rgba(0,0,0,.28));
      border-color: rgba(34,197,94,.55);
      color: #4ade80;
    }
    .online-pill:hover .online-tooltip{
      opacity: 1;
      transform: translateY(0);
    }

    /* ===== Language/FAQ overlay glass (как AOF) ===== */
    .glass-menu{
      background: linear-gradient(135deg, rgba(255,255,255,.26), rgba(255,255,255,.10));
      border: 1px solid rgba(34,197,94,.45);
      box-shadow: 0 12px 26px rgba(0,0,0,.20), inset 0 1px 0 rgba(255,255,255,.18);
      border-radius: .75rem;
      overflow: hidden;
    }
    .dark .glass-menu{
      background: linear-gradient(135deg, rgba(0,0,0,.45), rgba(0,0,0,.28));
      border-color: rgba(34,197,94,.55);
    }
    .glass-menu button:hover{ background: rgba(255,255,255,.16); }
    .dark .glass-menu button:hover{ background: rgba(255,255,255,.08); }

    /* ====== МОДАЛКА + ЗАМЫЛИВАНИЕ ФОНА (как AOF) ====== */
    .lang-modal-backdrop{
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      background: rgba(0,0,0,.18);
    }
    .dark .lang-modal-backdrop{ background: rgba(0,0,0,.35); }

    /* ====== УБРАТЬ "ПОЛОСУ" ОТ ФОКУСА (как AOF) ====== */
    #langBtn:focus,
    #langModalList button:focus,
    #faqButtonTop:focus,
    .support-top:focus,
    #langBackBtn:focus,
    #faqBackBtn:focus,
    #mobileMenuToggle:focus,
    #mobileLangBtn:focus,
    #mobileFaqBtn:focus,
    #mobileSupportBtn:focus,
    #fetchBtn:focus{
      outline: none !important;
      box-shadow: none !important;
    }
    #langBtn:focus-visible,
    #langModalList button:focus-visible,
    #faqButtonTop:focus-visible,
    .support-top:focus-visible,
    #langBackBtn:focus-visible,
    #faqBackBtn:focus-visible,
    #mobileMenuToggle:focus-visible,
    #mobileLangBtn:focus-visible,
    #mobileFaqBtn:focus-visible,
    #mobileSupportBtn:focus-visible{
      outline: none !important;
      box-shadow: 0 0 0 3px rgba(34,197,94,.35) !important;
    }

    /* ===== Font for ALL buttons (как AOF) ===== */
    :root{
      --pp-btn-font: ui-rounded, -apple-system, system-ui, "SF Pro Display", "SF Pro Text", "Inter", "Segoe UI", Roboto, Arial, "Noto Sans", sans-serif;
      --pp-header-h: 0px; /* для mobile menu */
    }
    button, .nav-badge, #supportLabelTop, #langCaption, #historyTitle{
      font-family: var(--pp-btn-font);
    }

    /* HARD KILL (как AOF) */
    * { -webkit-tap-highlight-color: transparent; }
    :focus,:focus-visible,:active{ outline:none !important; box-shadow:none !important; }
    button,a,[role="button"],[tabindex]{ outline:none !important; box-shadow:none !important; -webkit-tap-highlight-color: transparent; }
    button::-moz-focus-inner{ border:0; }

    /* ====== FIX: полностью убрать полосу на кнопке получения сигналов при нажатии ====== */
    #fetchBtn:focus,
    #fetchBtn:focus-visible,
    #fetchBtn:active{
      outline: none !important;
      box-shadow:
        0 10px 28px rgba(0,0,0,.22),
        inset 0 1px 0 rgba(255,255,255,.25),
        inset 0 -1px 0 rgba(255,255,255,.12) !important;
    }

    /* ====== FINAL KILL: полностью убираем "полосу" (iOS highlight / sheen) именно у кнопки прогнозов ====== */
    #fetchBtn{
      -webkit-appearance: none !important;
      appearance: none !important;
      -webkit-tap-highlight-color: rgba(0,0,0,0) !important;
      -webkit-touch-callout: none !important;
      user-select: none;
      -webkit-user-select: none;
    }
    /* чаще всего полоса появляется из-за overlay/подсветки + псевдо-блика ::before при нажатии */
    #fetchBtn:active::before,
    #fetchBtn:focus::before,
    #fetchBtn:focus-visible::before{
      opacity: 0 !important;
    }
    /* и дополнительно убираем любые фильтры/системные эффекты на активном состоянии */
    #fetchBtn:active{
      -webkit-filter: none !important;
      filter: none !important;
      background-image: inherit !important;
    }

    /* ===== Click zones: only image box ===== */
    #langBtn, #faqButtonTop{ line-height: 0; }
    #langCaption{ text-align:center; width:100%; pointer-events:none; }

    /* ===== MOBILE MENU (бургер -> крестик + выезд панели) ===== */
    .mobile-burger{
      width: 2.75rem;
      height: 2.75rem;
      border-radius: 1rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: .6rem;
      gap: .28rem;
      flex-direction: column;
      background: linear-gradient(135deg, rgba(255,255,255,.22), rgba(255,255,255,.06));
      border: 1px solid rgba(34,197,94,.40);
      box-shadow: 0 8px 22px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.22);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transition: transform .18s ease;
      transform: translate3d(0,0,0);
      touch-action: manipulation;
    }
    .dark .mobile-burger{
      background: linear-gradient(135deg, rgba(0,0,0,.45), rgba(0,0,0,.24));
      border-color: rgba(34,197,94,.5);
    }
    .mobile-burger:hover{ transform: translate3d(0,-1px,0); }

    .mobile-burger .hm-line{
      width: 1.3rem;
      height: 2px;
      border-radius: 9999px;
      background: rgba(22,163,74,.95);
      transition: transform .18s ease, opacity .18s ease, width .18s ease;
      transform-origin: center;
    }
    .dark .mobile-burger .hm-line{ background: rgba(74,222,128,.95); }

    .mobile-burger.open .hm-line:nth-child(1){
      transform: translateY(.42rem) rotate(45deg);
    }
    .mobile-burger.open .hm-line:nth-child(2){
      opacity: 0;
      width: .2rem;
    }
    .mobile-burger.open .hm-line:nth-child(3){
      transform: translateY(-.42rem) rotate(-45deg);
    }

    @media (max-width: 639px){
      #mobileMenuWrap{
        opacity: 0;
        pointer-events: none;
        transition: opacity .18s ease;
      }
      #mobileMenuWrap.open{
        opacity: 1;
        pointer-events: auto;
      }
      #mobileMenuPanel{
        transform: translateX(120%);
        transition: transform .22s ease;
      }
      #mobileMenuWrap.open #mobileMenuPanel{
        transform: translateX(0);
      }
    }

    .mobile-menu-item{
      display:flex;
      align-items:center;
      gap:.75rem;
      width:100%;
      padding:.55rem .6rem;
      border-radius: .85rem;
      border: 1px solid rgba(34,197,94,.35);
      background: linear-gradient(135deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.18);
      transition: transform .18s ease, border-color .18s ease;
    }
    .dark .mobile-menu-item{
      background: linear-gradient(135deg, rgba(0,0,0,.35), rgba(0,0,0,.18));
      border-color: rgba(34,197,94,.45);
    }
    .mobile-menu-item:hover{ transform: translateY(-1px); border-color: rgba(34,197,94,.6); }
    .mobile-menu-label{
      font-weight: 700;
      font-size: 13px;
      color: #166534;
      white-space: nowrap;
    }
    .dark .mobile-menu-label{ color: #4ade80; }

    /* чуть увеличить верхний бар на мобайле (как AOF) */
    @media (max-width: 639px){
      header .max-w-\[74rem\]{
        padding-top: .65rem !important;
        padding-bottom: .65rem !important;
      }
    }

    /* Язык-меню fixed (как AOF) */
    #langMenu{
      position: fixed !important;
      z-index: 2147483647 !important;
      top: 0;
      left: 0;
    }
    header{ z-index: 9990 !important; }

    /* ====== WAIT ANIMATION (как AOF): "Analyzing database..." ====== */
    .pp-loading{
      display: inline-flex;
      align-items: baseline;
      justify-content: center;
      gap: .15rem;
      width: 100%;
    }
    .pp-loading-dots{
      display: inline-block;
      width: 1.2em;
      overflow: hidden;
      vertical-align: bottom;
    }
    .pp-loading-dots::after{
      content: "...";
      display: inline-block;
      width: 0;
      overflow: hidden;
      animation: pp-ellipsis 1.05s steps(4, end) infinite;
    }
    @keyframes pp-ellipsis{
      to { width: 1.2em; }
    }
  </style>
</head>

<body class="min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white transition-colors relative diamond-bg">

  <!-- Шапка (1-в-1 как Apple of Fortune) -->
  <header class="fixed top-0 left-0 right-0 z-30 lgx-nav lgx-blur">
    <div class="max-w-[74rem] mx-auto px-4 py-2 flex items-center justify-between gap-3 sm:gap-4 flex-wrap">

      <!-- Логотип + Онлайн-индикатор слева -->
      <div class="flex items-center gap-3 sm:gap-4">
        <a href="main.html"
           class="shrink-0 inline-flex items-center justify-center p-0 transition-transform hover:scale-[1.02] focus:outline-none"
           aria-label="Home">
          <img
            src="images/logo-predictorpro-liquid.png"
            alt="PredictorPro"
            onerror="this.onerror=null; this.src='images/PredictorPro.jpg';"
            class="h-[4.25rem] sm:h-[5.25rem] lg:h-[5.75rem] w-auto select-none pointer-events-none -my-2" />
        </a>

        <div class="nav-badge online-pill text-[13px] font-semibold text-green-700 dark:text-green-400 relative">
          <span class="online-signal" aria-hidden="true">
            <span class="wave wave1"></span>
            <span class="wave wave2"></span>
            <span class="wave wave3"></span>
            <span class="online-dot"></span>
          </span>
          <span id="activeUsersCount" class="tabular-nums leading-none">—</span>
          <span id="onlineTooltip" class="online-tooltip">Users online</span>
        </div>
      </div>

      <div class="flex items-center gap-3 sm:gap-4">
        <!-- МОБИЛЬНОЕ МЕНЮ (бургер) -->
        <button id="mobileMenuToggle"
                class="sm:hidden mobile-burger focus:outline-none"
                aria-label="Menu"
                aria-expanded="false"
                type="button">
          <span class="hm-line"></span>
          <span class="hm-line"></span>
          <span class="hm-line"></span>
        </button>

        <!-- ДЕСКТОПНЫЕ КНОПКИ (скрыты на мобайле) -->
        <div id="desktopTopActions" class="hidden sm:flex items-center gap-3 sm:gap-4">

          <!-- Выбор языка -->
          <div class="relative flex flex-col items-center w-16 sm:w-20">
            <button id="langBtn"
                    class="inline-flex items-center justify-center p-0 m-0 bg-transparent border-0 shadow-none rounded-none transition-transform hover:scale-105 focus:outline-none"
                    aria-haspopup="true" aria-expanded="false" aria-label="Select language"
                    type="button">
              <img
                src="images/lang-button.png"
                alt=""
                class="w-16 h-16 sm:w-20 sm:h-20 object-contain block pointer-events-none select-none" />
              <span id="langBtnLabel" class="sr-only">Español</span>
            </button>
            <span id="langCaption" class="mt-1 text-[11px] leading-none font-semibold text-green-700 dark:text-green-400 whitespace-nowrap select-none">
              Idioma
            </span>

            <!-- оставлено в DOM (как AOF) -->
            <div id="langMenu" class="hidden w-32 glass-menu text-sm py-1">
              <button data-lang="ar" class="w-full text-right px-3 py-2 focus:outline-none" type="button">العربية</button>
              <button data-lang="es" class="w-full text-left  px-3 py-2 focus:outline-none" type="button">Español</button>
              <button data-lang="en" class="w-full text-left  px-3 py-2 focus:outline-none" type="button">English</button>
              <button data-lang="pl" class="w-full text-left  px-3 py-2 focus:outline-none" type="button">Polski</button>
              <button data-lang="fr" class="w-full text-left  px-3 py-2 focus:outline-none" type="button">Français</button>
            </div>
          </div>

          <!-- FAQ + SUPPORT (как AOF) -->
          <div class="flex items-center gap-3">
            <div class="flex flex-col items-center gap-1 w-16 sm:w-20">
              <button id="faqButtonTop"
                      class="inline-flex items-center justify-center p-0 m-0 bg-transparent border-0 shadow-none rounded-none transition-transform hover:scale-105 focus:outline-none"
                      aria-label="FAQ"
                      type="button">
                <img
                  src="images/faq-logo.png"
                  alt=""
                  class="w-16 h-16 sm:w-20 sm:h-20 object-contain block pointer-events-none select-none"
                  onerror="(function(img){
                    const list=[
                      'images/faq-logo.png','images/faq-logo.webp','images/faq-logo.jpg','images/faq-logo.jpeg',
                      'images/FAQ-logo.png','images/FAQ-logo.webp','images/FAQ-logo.jpg','images/FAQ-logo.jpeg',
                      'images/faq.png','images/faq.webp','images/faq.jpg','images/faq.jpeg'
                    ];
                    const i=(parseInt(img.dataset.try||'0',10));
                    if(i < list.length-1){ img.dataset.try=String(i+1); img.src=list[i+1]; }
                    else { img.style.display='none'; }
                  })(this);" />
              </button>
              <span class="text-[11px] leading-none font-semibold text-green-700 dark:text-green-400 whitespace-nowrap select-none pointer-events-none">FAQ</span>
            </div>

            <div class="flex flex-col items-center gap-1 w-16 sm:w-20">
              <a href="https://t.me/Pedro_PredictorPro_bot"
                 class="support-top inline-flex items-center justify-center p-0 m-0 bg-transparent border-0 shadow-none rounded-none transition-transform hover:scale-105 focus:outline-none"
                 target="_blank" rel="noopener noreferrer"
                 aria-label="Support chat">
                <img
                  src="images/support-icon.png"
                  alt="Support"
                  class="w-16 h-16 sm:w-20 sm:h-20 object-contain block pointer-events-none select-none"
                  onerror="this.onerror=null; this.src='images/—Pngtree—technical support_3767452.png';"
                />
              </a>
              <span id="supportLabelTop" class="text-[11px] leading-none font-semibold text-green-700 dark:text-green-400 whitespace-nowrap select-none pointer-events-none">
                Soporte
              </span>
            </div>
          </div>

        </div>
      </div>
    </div>
  </header>

  <!-- МОБИЛЬНАЯ ВЫЕЗЖАЮЩАЯ ПАНЕЛЬ (Язык/FAQ/Support) (1-в-1 AOF) -->
  <div id="mobileMenuWrap" class="sm:hidden fixed inset-0 z-[9988]">
    <div id="mobileMenuBg" class="absolute inset-0 lang-modal-backdrop"></div>

    <div id="mobileMenuPanel"
         class="absolute right-4 w-56 lgx-card lgx-blur lgx-sheen p-3"
         style="top: calc(var(--pp-header-h) + .5rem);">
      <div class="flex flex-col gap-2">
        <button id="mobileLangBtn" class="mobile-menu-item focus:outline-none" aria-label="Language" type="button">
          <img src="images/lang-button.png" alt="" class="w-10 h-10 object-contain pointer-events-none select-none">
          <span id="mobileLangText" class="mobile-menu-label">Idioma</span>
        </button>

        <button id="mobileFaqBtn" class="mobile-menu-item focus:outline-none" aria-label="FAQ" type="button">
          <img src="images/faq-logo.png" alt="" class="w-10 h-10 object-contain pointer-events-none select-none"
               onerror="(function(img){
                 const list=[
                   'images/faq-logo.png','images/faq-logo.webp','images/faq-logo.jpg','images/faq-logo.jpeg',
                   'images/FAQ-logo.png','images/FAQ-logo.webp','images/FAQ-logo.jpg','images/FAQ-logo.jpeg',
                   'images/faq.png','images/faq.webp','images/faq.jpg','images/faq.jpeg'
                 ];
                 const i=(parseInt(img.dataset.try||'0',10));
                 if(i < list.length-1){ img.dataset.try=String(i+1); img.src=list[i+1]; }
                 else { img.style.display='none'; }
               })(this);">
          <span class="mobile-menu-label">FAQ</span>
        </button>

        <a id="mobileSupportBtn"
           href="https://t.me/Pedro_PredictorPro_bot"
           target="_blank" rel="noopener noreferrer"
           class="mobile-menu-item focus:outline-none"
           aria-label="Support chat">
          <img src="images/support-icon.png" alt="Support" class="w-10 h-10 object-contain pointer-events-none select-none"
               onerror="this.onerror=null; this.src='images/—Pngtree—technical support_3767452.png';">
          <span id="mobileSupportText" class="mobile-menu-label">Soporte</span>
        </a>
      </div>
    </div>
  </div>
  <!-- /MOBILE MENU -->

  <!-- МОДАЛКА ВЫБОРА ЯЗЫКА (по центру) + blur (1-в-1 AOF) -->
  <div id="langOverlay" class="hidden fixed inset-0 z-[9998] flex items-center justify-center px-4">
    <div id="langOverlayBg" class="absolute inset-0 lang-modal-backdrop"></div>

    <div class="relative w-full max-w-xs sm:max-w-sm glass-menu">
      <button id="langBackBtn" class="relative w-full px-3 py-2 font-semibold focus:outline-none" type="button">
        <span class="pp-back-icon absolute left-3 top-1/2 -translate-y-1/2 text-green-700 dark:text-green-400" aria-hidden="true">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span id="langBackText" class="block w-full text-center">Back</span>
      </button>
      <div class="h-px bg-black/10 dark:bg-white/10"></div>

      <div id="langModalList" class="py-1 text-sm">
        <button data-lang="ar" class="w-full text-right px-3 py-2 focus:outline-none" type="button">العربية</button>
        <button data-lang="es" class="w-full text-left  px-3 py-2 focus:outline-none" type="button">Español</button>
        <button data-lang="en" class="w-full text-left  px-3 py-2 focus:outline-none" type="button">English</button>
        <button data-lang="pl" class="w-full text-left  px-3 py-2 focus:outline-none" type="button">Polski</button>
        <button data-lang="fr" class="w-full text-left  px-3 py-2 focus:outline-none" type="button">Français</button>
      </div>
    </div>
  </div>
  <!-- /LANG OVERLAY -->

  <!-- FAQ (по центру) + blur (как AOF) -->
  <div id="faqOverlay" class="hidden fixed inset-0 z-[9997] flex items-center justify-center px-4">
    <div id="faqOverlayBg" class="absolute inset-0 lang-modal-backdrop"></div>

    <div class="relative w-full max-w-xs sm:max-w-sm glass-menu">
      <button id="faqBackBtn" class="relative w-full px-3 py-2 font-semibold focus:outline-none" type="button">
        <span class="pp-back-icon absolute left-3 top-1/2 -translate-y-1/2 text-green-700 dark:text-green-400" aria-hidden="true">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span id="faqBackText" class="block w-full text-center">Back</span>
      </button>
      <div class="h-px bg-black/10 dark:bg-white/10"></div>

      <div id="faqPanel" class="p-4 max-h-[70vh] overflow-auto">
        <h3 id="faqTitle" class="text-lg font-semibold mb-2">Reglas del juego «Aviador»</h3>
        <p id="faqText" class="text-sm">
          El juego «Aviador» ofrece pronósticos de coeficientes para la próxima ronda.
          Haga clic en «Obtener pronóstico», espere los resultados y asegure sus ganancias.
          Cuanto más use la herramienta, más precisas serán nuestras señales.
        </p>
      </div>
    </div>
  </div>
  <!-- /FAQ OVERLAY -->

  <!-- Основной контент (в стиле AOF) -->
  <main class="flex flex-col items-center pt-28 sm:pt-36 lg:pt-48 pb-36 sm:pb-28 px-4">
    <div class="w-full max-w-md space-y-6">

      <!-- Ventana de pronóstico -->
      <div id="forecastWindow" class="lgx-card lgx-blur lgx-sheen p-6 sm:p-8 text-center">
        <h2 id="forecastTitle" class="text-xl sm:text-2xl font-semibold mb-4 text-black dark:text-white">
          Pronóstico «Aviador»
        </h2>
        <p id="aviatorForecast" class="text-xl text-gray-700 dark:text-gray-300">
          Haga clic en el botón para obtener un pronóstico
        </p>
        <p id="recommendation" class="mt-2 text-gray-600 dark:text-gray-400"></p>
      </div>

      <!-- Botón de pronóstico -->
      <button id="fetchBtn"
              class="lgx-btn solid lgx-blur lgx-sheen w-full py-3 text-[15px] sm:text-base text-green-950 dark:text-white"
              type="button">
        Obtener pronóstico
      </button>

      <!-- Historial de pronósticos -->
      <div id="historyContainer" class="hidden w-full">
        <h3 id="historyTitle" class="text-sm sm:text-base font-semibold mb-2 text-black dark:text-white text-center">
          Historial de los últimos pronósticos
        </h3>

        <div class="lgx-card lgx-blur lgx-sheen p-3">
          <ul id="historyList" class="w-full space-y-2 max-h-60 overflow-y-auto">
            <!-- items injected -->
          </ul>
        </div>
      </div>

    </div>
  </main>

  <!-- Нижний бар (копирайт) — как AOF: fixed + lgx-nav -->
  <div class="fixed left-0 right-0 bottom-[-1px] z-20 lgx-nav lgx-blur">
    <div class="max-w-[74rem] mx-auto px-4 py-2 text-center text-[12px] sm:text-sm font-semibold text-gray-700 dark:text-gray-300 select-none">
      Copyright © 2024-2025 "Predictor-Pro". <span id="rightsLabel">All rights reserved.</span>
    </div>
  </div>

  <script>
    // фиксируем dark по умолчанию (как AOF)
    document.documentElement.classList.add('dark');

    // ===== I18N словарь (aviator)
    const I18N = {
      ar: {
        langName: 'العربية', langTag:'ar-DZ', dir:'rtl',
        title: 'PredictorPro – أفياتور',
        back: 'رجوع',
        usersOnline: 'المستخدمون عبر الإنترنت',
        support: 'الدعم',
        langCaption: 'اللغة',
        forecastTitle: 'توقع «أفياتور»',
        forecastHint: 'اضغط على الزر للحصول على التوقع',
        btnGet: 'الحصول على التوقع',
        wait: 'جارٍ تحليل قاعدة البيانات',
        faqTitle: 'قواعد لعبة «أفياتور»',
        faqText: 'تعرض لعبة «أفياتور» توقعات للمعامل في الجولة التالية. اضغط «الحصول على التوقع»، انتظر النتائج وثبِّت أرباحك. كلما استخدمت الأداة أكثر أصبحت إشاراتنا أدق.',
        historyTitle: 'سجل آخر التوقعات',
        rights: 'جميع الحقوق محفوظة.',
        recs: [
          'معامل جيد، يمكنك زيادة المبلغ.',
          'احتمال فوز مرتفع، المخاطرة مبررة.',
          'معامل متوسط، تصرّف بحذر.',
          'ربح صغير، نوصي بمتوسط الرهانات.',
          'نتيجة ممتازة، ثبّت أرباحك.',
          'احتمال يتجاوز 80%، يمكن رفع الرهان.',
          'نوصي بالانتظار قبل الرهان التالي.',
          'احتمال الهبوط مرتفع، كن حذرًا.',
          'وقت مثالي للدخول، تصرّف الآن.',
          'إشارة متوسطة، من الأفضل عدم المخاطرة.'
        ]
      },
      es: {
        langName: 'Español', langTag:'es-PE', dir:'ltr',
        title: 'PredictorPro – Aviador',
        back: 'Atrás',
        usersOnline: 'Usuarios en línea',
        support: 'Soporte',
        langCaption: 'Idioma',
        forecastTitle: 'Pronóstico «Aviador»',
        forecastHint: 'Haga clic en el botón para obtener un pronóstico',
        btnGet: 'Obtener pronóstico',
        wait: 'Analizando base de datos',
        faqTitle: 'Reglas del juego «Aviador»',
        faqText: 'El juego «Aviador» ofrece pronósticos de coeficientes para la próxima ronda. Haga clic en «Obtener pronóstico», espere los resultados y asegure sus ganancias. Cuanto más use la herramienta, más precisas serán nuestras señales.',
        historyTitle: 'Historial de los últimos pronósticos',
        rights: 'Todos los derechos reservados.',
        recs: [
          'Buen coeficiente, puede apostar una suma mayor.',
          'Alta probabilidad de victoria, el riesgo vale la pena.',
          'Coeficiente medio, proceda con cautela.',
          'Ganancia pequeña, recomendamos promediar las apuestas.',
          'Excelente resultado, asegure sus ganancias.',
          'Probabilidad superior al 80%, puede aumentar la apuesta.',
          'Recomendamos esperar antes de la próxima apuesta.',
          'Mayor probabilidad de caída, sea cauteloso.',
          'Momento ideal para entrar, actúe ahora.',
          'Señal moderada, es mejor no arriesgarse.'
        ]
      },
      en: {
        langName: 'English', langTag:'en', dir:'ltr',
        title: 'PredictorPro – Aviator',
        back: 'Back',
        usersOnline: 'Users online',
        support: 'Support',
        langCaption: 'Language',
        forecastTitle: 'Aviator Forecast',
        forecastHint: 'Click the button to get a forecast',
        btnGet: 'Get prediction',
        wait: 'Analyzing database',
        faqTitle: 'Aviator Game Rules',
        faqText: 'The “Aviator” game provides odds forecasts for the next round. Click “Get forecast”, wait for the result and lock in your profit. The more you use the tool, the more accurate the signals become.',
        historyTitle: 'Recent forecasts history',
        rights: 'All rights reserved.',
        recs: [
          'Good odds, you can bet more.',
          'High chance of winning, risk is justified.',
          'Medium odds, proceed carefully.',
          'Small profit, consider averaging bets.',
          'Excellent result, secure your profit.',
          'Probability above 80%, you may increase the bet.',
          'We recommend waiting before the next bet.',
          'Higher chance of drop, be cautious.',
          'Perfect moment to enter, act now.',
          'Moderate signal, better not to risk.'
        ]
      },
      pl: {
        langName: 'Polski', langTag:'pl', dir:'ltr',
        title: 'PredictorPro – Aviator',
        back: 'Wstecz',
        usersOnline: 'Użytkownicy online',
        support: 'Wsparcie',
        langCaption: 'Język',
        forecastTitle: 'Prognoza „Aviator”',
        forecastHint: 'Kliknij przycisk, aby otrzymać prognozę',
        btnGet: 'Pobierz prognozę',
        wait: 'Analizowanie bazy danych',
        faqTitle: 'Zasady gry „Aviator”',
        faqText: 'Gra „Aviator” podaje prognozy kursów na następną rundę. Kliknij „Pobierz prognozę”, poczekaj na wynik i zabezpiecz zysk. Im częściej korzystasz, tym dokładniejsze sygnały.',
        historyTitle: 'Historia ostatnich prognoz',
        rights: 'Wszelkie prawa zastrzeżone.',
        recs: [
          'Dobry kurs, możesz zwiększyć stawkę.',
          'Wysoka szansa wygranej, warto zaryzykować.',
          'Średni kurs, postępuj ostrożnie.',
          'Mały zysk, zalecamy uśrednianie stawek.',
          'Świetny wynik, zabezpiecz zysk.',
          'Prawdopodobieństwo powyżej 80%, można podnieść stawkę.',
          'Zalecamy poczekać przed następnym zakładem.',
          'Większa szansa spadku, bądź ostrożny.',
          'Idealny moment na wejście, działaj teraz.',
          'Sygnał umiarkowany, lepiej nie ryzykować.'
        ]
      },
      fr: {
        langName: 'Français', langTag:'fr', dir:'ltr',
        title: 'PredictorPro – Aviator',
        back: 'Retour',
        usersOnline: 'Utilisateurs en ligne',
        support: 'Support',
        langCaption: 'Langue',
        forecastTitle: 'Prévision « Aviator »',
        forecastHint: 'Cliquez sur le bouton pour obtenir une prévision',
        btnGet: 'Obtenir une prévision',
        wait: 'Analyse de la base de données',
        faqTitle: 'Règles du jeu « Aviator »',
        faqText: 'Le jeu « Aviator » fournit des prévisions de cotes pour la prochaine manche. Cliquez sur « Obtenir une prévision », attendez le résultat et sécurisez vos gains. Plus vous utilisez l’outil, plus nos signaux deviennent précis.',
        historyTitle: 'Historique des dernières prévisions',
        rights: 'Tous droits réservés.',
        recs: [
          'Bonne cote, vous pouvez miser davantage.',
          'Forte probabilité de gain, le risque en vaut la peine.',
          'Cote moyenne, avancez avec prudence.',
          'Petit gain, nous recommandons de moyenner les mises.',
          'Excellent résultat, sécurisez vos gains.',
          'Probabilité supérieure à 80 %, misez davantage.',
          'Nous recommandons d’attendre avant la prochaine mise.',
          'Risque de baisse accru, soyez prudent.',
          'Moment idéal pour entrer, agissez maintenant.',
          'Signal modéré, mieux vaut ne pas risquer.'
        ]
      }
    };

    // ===== Узлы для подстановки
    const htmlEl = document.documentElement;
    const docTitle = document.getElementById('docTitle');

    const langBtn = document.getElementById('langBtn');
    const langBtnLabel = document.getElementById('langBtnLabel');
    const langCaptionEl = document.getElementById('langCaption');

    const supportLabelTop = document.getElementById('supportLabelTop');
    const onlineTooltipEl = document.getElementById('onlineTooltip');

    const forecastTitleEl = document.getElementById('forecastTitle');
    const forecastHintEl  = document.getElementById('aviatorForecast');
    const fetchBtn        = document.getElementById('fetchBtn');
    const historyTitleEl  = document.getElementById('historyTitle');

    const faqTitleEl = document.getElementById('faqTitle');
    const faqTextEl  = document.getElementById('faqText');

    const rightsEl = document.getElementById('rightsLabel');

    const mobileLangText = document.getElementById('mobileLangText');
    const mobileSupportText = document.getElementById('mobileSupportText');

    const langBackText = document.getElementById('langBackText');
    const faqBackText  = document.getElementById('faqBackText');

    // Глобальные тексты, зависящие от языка
    let WAIT_BASE = I18N.es.wait;
    let recommendations = I18N.es.recs;
    let isLoading = false;

    function renderWait(){
      if (!forecastHintEl) return;
      forecastHintEl.innerHTML =
        `<span class="pp-loading"><span>${WAIT_BASE}</span><span class="pp-loading-dots" aria-hidden="true"></span></span>`;
    }

    function applyLang(code){
      const dict = I18N[code] || I18N.es;

      htmlEl.lang = dict.langTag;
      htmlEl.dir  = dict.dir;

      if (docTitle) docTitle.textContent = dict.title;

      if (langBtnLabel) langBtnLabel.textContent = dict.langName;
      if (langBtn) langBtn.setAttribute('aria-label', dict.langName);

      if (langCaptionEl) langCaptionEl.textContent = dict.langCaption || 'Language';

      if (supportLabelTop) supportLabelTop.textContent = dict.support || 'Support';
      if (mobileSupportText) mobileSupportText.textContent = dict.support || 'Support';
      if (mobileLangText) mobileLangText.textContent = dict.langCaption || 'Language';

      if (onlineTooltipEl) onlineTooltipEl.textContent = dict.usersOnline || 'Users online';

      if (langBackText) langBackText.textContent = dict.back || 'Back';
      if (faqBackText)  faqBackText.textContent  = dict.back || 'Back';

      if (forecastTitleEl) forecastTitleEl.textContent = dict.forecastTitle;

      if (!isLoading && forecastHintEl) forecastHintEl.textContent = dict.forecastHint;

      if (fetchBtn) fetchBtn.textContent = dict.btnGet;
      if (historyTitleEl) historyTitleEl.textContent = dict.historyTitle;

      if (faqTitleEl) faqTitleEl.textContent = dict.faqTitle;
      if (faqTextEl)  faqTextEl.textContent  = dict.faqText;

      if (rightsEl && dict.rights) rightsEl.textContent = dict.rights;

      WAIT_BASE = dict.wait;
      recommendations = dict.recs;

      if (isLoading) renderWait();

      try { localStorage.setItem('preferredLang', code); } catch(_){}
    }

    /* ==== Онлайн-индикатор (как AOF): 1..3 шаг, не сбрасывается при обновлении ==== */
    const usersEl = document.getElementById('activeUsersCount');
    const MIN_USERS = 20;
    const MAX_USERS = 80;
    const LS_KEY = 'pp_online_users_v1';
    function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }
    let saved = null;
    try { saved = parseInt(localStorage.getItem(LS_KEY), 10); } catch(_) {}
    let currentUsers = Number.isFinite(saved) ? clamp(saved, MIN_USERS, MAX_USERS)
      : Math.floor(MIN_USERS + Math.random() * (MAX_USERS - MIN_USERS + 1));
    usersEl.textContent = currentUsers;
    try { localStorage.setItem(LS_KEY, String(currentUsers)); } catch(_) {}
    function updateUsers() {
      const step = 1 + Math.floor(Math.random() * 3);
      const dir  = Math.random() < 0.5 ? -1 : 1;
      currentUsers = clamp(currentUsers + dir * step, MIN_USERS, MAX_USERS);
      usersEl.textContent = currentUsers;
      try { localStorage.setItem(LS_KEY, String(currentUsers)); } catch(_) {}
    }
    setInterval(updateUsers, 5000);

    /* ===== Язык: модалка по центру (как AOF) ===== */
    const langOverlay = document.getElementById('langOverlay');
    const langOverlayBg = document.getElementById('langOverlayBg');
    const langBackBtn = document.getElementById('langBackBtn');
    const langModalList = document.getElementById('langModalList');

    function openLangMenu(){
      if (!langOverlay) return;
      langOverlay.classList.remove('hidden');
      if (langBtn) langBtn.setAttribute('aria-expanded','true');
    }
    function closeLangMenu(){
      if (!langOverlay) return;
      langOverlay.classList.add('hidden');
      if (langBtn) langBtn.setAttribute('aria-expanded','false');
    }

    if (langBtn) {
      langBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        const isOpen = !langOverlay.classList.contains('hidden');
        if (isOpen) closeLangMenu(); else openLangMenu();
      });
    }
    if (langBackBtn) {
      langBackBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        closeLangMenu();
      });
    }
    if (langOverlayBg) langOverlayBg.addEventListener('click', () => closeLangMenu());

    if (langModalList) {
      langModalList.addEventListener('click', (e) => e.stopPropagation());
      langModalList.querySelectorAll('button[data-lang]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const code = btn.getAttribute('data-lang') || 'es';
          applyLang(code);
          closeLangMenu();
        });
      });
    }

    /* ===== FAQ: модалка по центру (как AOF) ===== */
    const faqOverlay = document.getElementById('faqOverlay');
    const faqOverlayBg = document.getElementById('faqOverlayBg');
    const faqBackBtn = document.getElementById('faqBackBtn');
    const faqBtnTopEl = document.getElementById('faqButtonTop');

    function openFaq(){
      if (!faqOverlay) return;
      faqOverlay.classList.remove('hidden');
    }
    function closeFaq(){
      if (!faqOverlay) return;
      faqOverlay.classList.add('hidden');
    }
    function toggleFaq(){
      const isOpen = faqOverlay && !faqOverlay.classList.contains('hidden');
      if (isOpen) closeFaq(); else openFaq();
    }
    if (faqBtnTopEl) faqBtnTopEl.addEventListener('click', (e) => { e.stopPropagation(); toggleFaq(); });
    if (faqBackBtn) faqBackBtn.addEventListener('click', (e) => { e.stopPropagation(); closeFaq(); });
    if (faqOverlayBg) faqOverlayBg.addEventListener('click', () => closeFaq());

    const faqPanelEl = document.getElementById('faqPanel');
    if (faqPanelEl) faqPanelEl.addEventListener('click', (e) => e.stopPropagation());

    /* ===== Мобильное бургер-меню (как AOF) ===== */
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const mobileMenuWrap = document.getElementById('mobileMenuWrap');
    const mobileMenuBg = document.getElementById('mobileMenuBg');
    const mobileLangBtn = document.getElementById('mobileLangBtn');
    const mobileFaqBtn = document.getElementById('mobileFaqBtn');
    const mobileSupportBtn = document.getElementById('mobileSupportBtn');

    function openMobileMenu(){
      if (!mobileMenuWrap || !mobileMenuToggle) return;
      mobileMenuWrap.classList.add('open');
      mobileMenuToggle.classList.add('open');
      mobileMenuToggle.setAttribute('aria-expanded','true');
    }
    function closeMobileMenu(){
      if (!mobileMenuWrap || !mobileMenuToggle) return;
      mobileMenuWrap.classList.remove('open');
      mobileMenuToggle.classList.remove('open');
      mobileMenuToggle.setAttribute('aria-expanded','false');
    }
    function toggleMobileMenu(){
      const isOpen = mobileMenuWrap && mobileMenuWrap.classList.contains('open');
      if (isOpen) closeMobileMenu(); else openMobileMenu();
    }

    if (mobileMenuToggle) {
      mobileMenuToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleMobileMenu();
      });
    }
    if (mobileMenuBg) mobileMenuBg.addEventListener('click', () => closeMobileMenu());

    if (mobileLangBtn) {
      mobileLangBtn.addEventListener('click', () => {
        closeMobileMenu();
        openLangMenu();
      });
    }
    if (mobileFaqBtn) {
      mobileFaqBtn.addEventListener('click', () => {
        closeMobileMenu();
        toggleFaq();
      });
    }
    if (mobileSupportBtn) mobileSupportBtn.addEventListener('click', () => closeMobileMenu());

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape'){
        closeLangMenu();
        closeFaq();
        closeMobileMenu();
      }
    });

    /* ===== сохраняем высоту шапки для mobile menu (как AOF) ===== */
    (function syncHeaderHeight(){
      const root = document.documentElement;
      const headerEl = document.querySelector('header');
      if (!headerEl) return;

      function update(){
        const hh = headerEl.getBoundingClientRect().height;
        root.style.setProperty('--pp-header-h', hh + 'px');
      }
      window.addEventListener('resize', update);
      requestAnimationFrame(update);
      setTimeout(update, 0);
    })();

    // init language
    (function initLang(){
      let code = 'es';
      try {
        const savedLang = localStorage.getItem('preferredLang');
        if (savedLang && I18N[savedLang]) code = savedLang;
      } catch(_){}
      applyLang(code);
    })();

    // --------- ЛОГИКА ПРОГНОЗОВ (оставлена) ----------
    const recommendationEl = document.getElementById('recommendation');
    const historyContainer = document.getElementById('historyContainer');
    const historyList = document.getElementById('historyList');
    const MAX_HISTORY = 10;
    let history = [];

    fetchBtn.addEventListener('click', () => {
      fetchBtn.disabled = true;
      fetchBtn.classList.add('opacity-50', 'cursor-not-allowed');

      isLoading = true;
      renderWait();

      recommendationEl.textContent = '';

      setTimeout(() => {
        const r = Math.random();
        let low, high;
        if (r < 0.72) {
          low = 1; high = 2;
        } else if (r < 0.945) {
          low = 2; high = 3;
        } else if (r < 0.995) {
          low = 3; high = 5;
        } else if (r < 1.015) {
          low = 5; high = 10;
        } else if (r < 1.0199) {
          low = 10; high = 20;
        } else {
          low = 20; high = 50;
        }
        const coefValue = (Math.random() * (high - low) + low).toFixed(2);
        const coef = `> ${coefValue}×`;

        isLoading = false;
        forecastHintEl.textContent = coef;

        const rec = recommendations[Math.floor(Math.random() * recommendations.length)];
        recommendationEl.textContent = rec;

        history.unshift(coef);
        if (history.length > MAX_HISTORY) history.pop();

        historyList.innerHTML = '';
        history.forEach(item => {
          const li = document.createElement('li');
          li.textContent = item;
          li.className = 'lgx-chip px-4 py-2 text-sm text-gray-900 dark:text-white';
          historyList.appendChild(li);
        });

        historyContainer.classList.remove('hidden');

        fetchBtn.disabled = false;
        fetchBtn.classList.remove('opacity-50', 'cursor-not-allowed');
      }, 3000);
    });
  </script>
</body>
</html>

